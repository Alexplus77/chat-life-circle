(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{11:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(5),o=n.n(a),i=n(2),r=(n(11),n(4)),u=n(6),l=n.n(u),j=n(0),m=function(e){var t=e.item,n=e.handleRemove,s=t.message,c=t.userId,a=t.id;return Object(j.jsxs)("div",{className:l()("message my-message",{"message anonymous-message":c!==localStorage.getItem("userId")}),children:[s," ",Object(j.jsx)("i",{onClick:function(){return n(a)},className:"fa fa-times","aria-hidden":"true"})]},a)},d=function(){return Object(j.jsx)("div",{className:"spinner-grow",role:"status",children:Object(j.jsx)("span",{className:"sr-only",children:"Loading..."})})};var h=function(){var e=Object(s.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),o=Object(i.a)(a,2),u=o[0],l=o[1],h=Object(s.useState)(!1),b=Object(i.a)(h,2),f=b[0],O=b[1],g=Object(s.useState)(!1),v=Object(i.a)(g,2),p=v[0],x=v[1];Object(s.useEffect)((function(){localStorage.setItem("userId",Object(r.a)())}),[]),Object(s.useEffect)((function(){fetch("http://localhost:8080/messages").then((function(e){return e.json()})).then((function(e){c(e)}))}),[p]);var S=function(e){e.preventDefault(),x(!p),O(!0),fetch("http://localhost:8080/messages",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({message:u,userId:localStorage.getItem("userId")})}).then((function(e){return e.json()})).then((function(e){O(!1),l("")}))},N=function(e){x(!p),O(!0),fetch("http://localhost:8080/messages/".concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){O(!1)}))};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"container-messages",children:[!(null===n||void 0===n?void 0:n.length)&&"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442",null===n||void 0===n?void 0:n.map((function(e){return Object(j.jsx)(m,{isLoading:f,handleRemove:N,item:e},Object(r.a)())})),f&&Object(j.jsx)(d,{})]})}),Object(j.jsxs)("form",{onSubmit:S,className:"form",children:[Object(j.jsx)("input",{className:"input",onChange:function(e){return l(e.target.value)},value:u}),Object(j.jsx)("button",{className:"button",onSubmit:S,children:"Ok"})]})]})};n(13);o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(h,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.222ee7c8.chunk.js.map